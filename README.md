# **🎮 Raonzena ( 우리 모두 즐거운 화상 게임 )**

👇라온제나 소개 및 시연 영상👇


라온제나 시나리오는 👉여기👈에서 더 자세히 보실 수 있습니다.

<br>


# Ⅰ. 서비스 소개
# 1. 서비스 설명

## 개요
- 한줄 소개 : 무료한 일상에서 벗어나 즐거움을 느끼고 싶은 현대인을 위한 `웹 화상 게임` 서비스
- 서비스 명 : 라온제나(Raonzena)
    - 즐거운 우리, 기쁜 우리라는 뜻으로•기쁨을 나누고 또 얻어갈 수 있는 장소라는 의미


## 🎯 타겟
- 시간적 / 공간적 제약으로 인해 오프라인으로 지인들과 시간을 보낼 수 없는 사람들
- 처음 보는 사람들과 무엇을 해야 할 지 머리가 하얘지는 사람들  
- 👉 오프라인으로 재미있게 소통하고 싶은 모든 사람들

<br>


#  2. 기획 배경
## 배경
# 여기 바꿔주세욥!!!!!
우리는 프로젝트나 단체 활동에서 모르는 사람들과 팀을 꾸려 일을 시작할 때 어색함을 느끼곤 합니다. 나랑은 이러한 어색함이 제대로 해소되지 않고, 프로젝트를 진행했을 때 생기는 문제에 집중했습니다.

이 어색함은 서로에게 실례가 될까봐 의견을 제시하지 못하거나, 원하지 않는 의견에 어쩔수 없게 동의하여 프로젝트의 진행 과정과 성과에 불이익을 초래합니다.

반면 적절한 아이스브레이킹으로 팀원들간에 친밀감이 있는 상태에서 프로젝트가 진행되면 *1)일의 성과가 더 높고, *2)의사결정에 긍정적인 결과가 있다고 합니다.*
****************


## 🥅 목적 
무료함에 지친 사람들이 즐거움을 경험하게 하자


## 의의
- 비대면 상황에서 직접 만나지 않고도 즐길 수 있는 온라인 웹 화상 게임
- 간단한 게임으로 서로를 더 잘 알아가고, 아이스브레이킹의 효과

<br>


# 3. 서비스 화면




# Ⅱ. 기술스택
# 1. webRTC
# 2. Web Socket
# 3. Teachable Machine
# 4. Redis
# 5. S3


# Ⅲ. 개발 환경 🖥️
## 🖱Backend  
    IntelliJ  
    spring boot 2.7.7  
    spring-boot-jpa  
    Spring Security  
    Java 11  
    AWS EC2  
    mysql 8.0.31  
    redis 
    S3 

## 🖱Frontend
    Visual Studio Code  
    React.js 18.2.0  
    redux 4.2.1   
    redux-persist: 6.0.0

## 🖱Web RTC  
    openvidu-browser: 2.25.0  

## 🖱ImageGame  
    Teachable Machine 0.8.5

## 🖱CI/CD
    aws ec2
    docker
    nginx
    jenkins

## 👨‍👩‍👧협업 툴
    Git  
    Jira  
    Notion  
    Mattermost  
    Webex  

# Ⅳ. 프로젝트 진행
프로젝트 기간 - 2023.01.02 ~ 2023.02.17

# 1. Git Flow
git flow 사용을 위해 우아한 형제들의 git flow 사용을 참고했습니다. 각자 맡은 기능에 맞게 feature 브랜치를 생성하고, 완료된 기능은 develop에 merge하여 사용했습니다. 충돌 상황을 최소화하고자 매일 오전 스크럼에 develop 최신 버전을 pull받고 시작할 것을 강조했습니다.

또한 commit message 는 [FE|jisu] mafia | 거짓말 탐지기 5초 제한, 게임당 1회 사용 제한 추가 와 같이 통일하여 작성했습니다.

git



# 2. Jira
매주 금요일 오후 회의에서 차주에 진행되어야 할 이슈를 백로그에 등록했습니다. 금주에 완료하지 못한 이슈나, 앞으로 진행할 이슈들을 추가합니다.

에픽은 가장 큰 단위인 기획, 유저관리, 마피아, 콜마이네임 등으로 구성하였습니다.

스토리는 실제 유저 플로우를 고려하여 홈페이지에서 로그인 창을 통해 로그인 한다 와 같이 작성하였으며,

이슈는 스토리를 완료하기 위한 작은 업무 단위로 생성했습니다. 예를 들어 로그인 폼 생성, 로그인 클릭 시 action 정의 requestLogin 함수 정의 Login token 발급 등으로 구성했습니다.

에픽링크 태그를 사용하여 이슈를 구별하기 쉽게 했습니다.

무엇보다 담당자와 스토리 포인트 설정, 현재 작업중인 내용 지라에 실시간으로 반영하는 것을 가장 중요하게 생각했습니다.

image-20210828171218788



# 3. Notion
모두가 공유해야할 자료 및 링크는 노션에 정리했습니다. 특히 userflow나 api 명세 와 같이 여러번 다시 봐야하고 중요한 정보들은 특히 노션에 공유하여 불필요한 커뮤니케이션 리소스를 줄이기 위해 노력했습니다.

변수와 메서드의 naming rule, 인덴팅과 줄바꿈 규칙, vue에서의 state와 props 순서도 설정했습니다.

notion



# V. 프로젝트 산출물

## 💫서비스 아키텍처 
(README_assets/서비스아키텍처.PNG)

## 💭요구사항 정의서
요구사항 정의서

## 🎨 화면 설계서
화면설계서1

화면설계서2










----------------------------------------

✨Jenkins를 이용한 CD 구축 및 SSL 인증서 적용
제가 담당하여 서비스 아키텍처와 같이, Jenkins의 pipeline을 이용하여 자동 배포를 구축하였습니다. Gitlab webhook을 설정하여 Jenkins에 빌드 트리거를 설정했고, 이에 따라 Gitlab에서 master 브랜치에 push하면 자동으로 배포될 수 있도록 구축하여 개발하는 과정에서 배포로 인한 시간 낭비를 줄였습니다. 또한 프론트엔드인 React.js는 Nginx와 함께 docker image로 빌드하여 배포하였고, 백엔드 및 redis, openvidu 또한 docker container로 배포하였습니다. 그리고 Nginx와 letsencrypt를 이용하여 ssl 인증서를 적용하였고, 프론트엔드는 443(https)로 프록시로 분기시켰고 백엔드는 /api 경로로 프록시를 걸어줬습니다.

프로그램 배포 방법은 여기에서 볼 수 있습니다. 해당 배포 방법은 CI/CD를 구축할 수 있는 내용은 아닙니다.(단순 배포 방법)
✨기술 특이점
Teachable Machine
자세를 학습시켜 pose detection을 통한 모션 인식으로 자세 인식을 통해 유저가 각 운동 종목을 잘 수행하는지 체크했고, 운동 개수를 카운팅할 수 있도록 하였습니다.

티처블머신

이런 식으로 Teachable Machine으로 학습을 시키면 자세별로 도출된 값을 이용할 수 있게 됩니다. 여기서 추출된 코드와 값으로 홈동 서비스에 맞게 가공하여 구현하였습니다.

WebRTC (Openvidu)
Openvidu로만 할 수 있는 기능 뿐만이 아니라 백엔드를 함께 이용한 개발로 여러 기능을 구현했습니다. 각 방마다 인원수가 6명까지만 들어갈 수 있게 구현하였고, 방장만 게임을 시작할 수 있기에 방을 만들거나 방에서 인원이 나가면 자동으로 다른 사람에게 방장 권한이 부여되게 하였습니다. 그리고 private 방을 만들 수 있게 하여 방 번호와 비밀번호를 아는 사용자 외에는 들어오지 못하게 구현하였고, 빠른 시작 기능을 구현하여 현재 존재하는 방에 빠르게 입장할 수 있게 하였고, 방이 없으면 자동으로 방 생성까지 할 수 있도록 구현하였습니다.

Redis
랭킹 기능에 들어가는 랭킹 정보는 자정마다 업데이트 되는 정보여서 단순한 구조의 정보이고, 반복적으로 동일하게 제공되고, 최신화가 실시간으로 필요하지 않은 정보였습니다. 이러한 데이터의 특성으로 캐싱을 적용하기에 적절하다고 생각을 했고, Redis에 랭킹 정보를 저장하여 DB를 거치지 않고 정보를 가져와 트래픽이 많아질 때 백엔드 부하를 줄이고, 정보 조회 속도를 높였습니다. 또한 저희는 Spring Scurity와 JWT를 이용하여 인증을 구현하였는데, Redis를 이용해 로그아웃시킨 토큰들을 만료처리하여 해당 토큰으로는 다시 인증할 수 없도록 구현하였습니다.

redux-toolkit
프론트엔드 구현시에는 React와 redux-toolkit을 이용하여 Ducks Pattern 기반 상태 관리를 하였습니다.

배포
도커, Nginx, Jenkins를 이용한 자동 무중단 배포를 구현하였습니다. 백엔드를 도커 컨테이너로 배포하였고, 프론트로 Nginx와 함께 도커 컨테이너로 배포하였습니다.


